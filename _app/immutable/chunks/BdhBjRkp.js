import{U as n,u as t,ax as s}from"./xBOr3W9n.js";function e(s,e,u){if(null==s)return e(void 0),n;const o=t(()=>s.subscribe(e,u));return o.unsubscribe?()=>o.unsubscribe():o}const u=[];function o(t,e=n){let o=null;const r=new Set;function c(n){if(s(t,n)&&(t=n,o)){const n=!u.length;for(const s of r)s[1](),u.push(s,t);if(n){for(let n=0;n<u.length;n+=2)u[n][0](u[n+1]);u.length=0}}}function i(n){c(n(t))}return{set:c,update:i,subscribe:function(s,u=n){const f=[s,u];return r.add(f),1===r.size&&(o=e(c,i)||n),s(t),()=>{r.delete(f),0===r.size&&o&&(o(),o=null)}}}}function r(n){let t;return e(n,n=>t=n)(),t}export{r as g,e as s,o as w};
