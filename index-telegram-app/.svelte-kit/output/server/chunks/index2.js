import{n,i as t}from"./index.js";import"clsx";const e=[];function s(n,t){return{subscribe:o(n,t).subscribe}}function o(s,o=n){let i=null;const r=new Set;function u(n){if(t(s,n)&&(s=n,i)){const n=!e.length;for(const t of r)t[1](),e.push(t,s);if(n){for(let n=0;n<e.length;n+=2)e[n][0](e[n+1]);e.length=0}}}function c(n){u(n(s))}return{set:u,update:c,subscribe:function(t,e=n){const f=[t,e];return r.add(f),1===r.size&&(i=o(u,c)||n),t(s),()=>{r.delete(f),0===r.size&&i&&(i(),i=null)}}}}export{s as r,o as w};
